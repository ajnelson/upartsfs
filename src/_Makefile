CC := clang
CFLAGS := -Wall $(shell pkg-config fuse --cflags)
LDFLAGS := $(shell pkg-config fuse --libs)
topsrcdir := ..

targets = fusexmp upartsfs

all: $(targets)

fusexmp: fusexmp.c
	$(CC) $(CFLAGS) $(LDFLAGS) -lulockmgr $< -o $@

upartsfs: upartsfs.c
	$(CC) -v $(CFLAGS) $(LDFLAGS) -I $(topsrcdir)/deps/sleuthkit -I $(topsrcdir)/deps/sleuthkit/build/include -lulockmgr $< -o $@

clean:
	rm -f *.o
	rm -f $(targets)
